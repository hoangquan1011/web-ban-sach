<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Qu·∫£n L√Ω ƒê∆°n H√†ng - Nh√† S√°ch Online</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f9f9f9; margin: 20px; }
    h1 { text-align: center; margin-bottom: 20px; }

    table { width: 100%; border-collapse: collapse; background: white; }
    th, td { padding: 10px; border: 1px solid #ddd; text-align: center; }
    th { background: #5B8C51; color: white; }
    tr:nth-child(even) { background: #f2f2f2; }

    .btn { background: #5B8C51; color: white; padding: 6px 12px; text-decoration: none; border-radius: 4px; cursor: pointer; border: none; }
    .btn:hover { background: #4E7042; }

    .search-bar { text-align: right; margin-bottom: 10px; }
    input[type="text"] { padding: 6px; width: 200px; border: 1px solid #ccc; border-radius: 4px; }
    .no-order { text-align: center; color: #777; font-style: italic; padding: 20px; }

    /* --- Chi ti·∫øt ƒë∆°n h√†ng --- */
    .info, .summary { background: white; padding: 15px; border: 1px solid #ddd; margin-bottom: 20px; }
    .info h3, .summary h3 { margin-top: 0; }
    td img { width:60px; height:60px; object-fit:cover; border-radius:6px; border:1px solid #eee; display:block; margin:0 auto; }
    .total { font-weight: bold; color: #e74c3c; }
    .container { max-width: 900px; margin: 0 auto; }

    #order-list, #order-detail { transition: all 0.3s ease; }
    #order-detail { display: none; }

    .back-btn {
      background: #3498db;
      color: white;
      border: none;
      padding: 8px 14px;
      border-radius: 4px;
      cursor: pointer;
      margin-bottom: 15px;
    }
    .back-btn:hover { background: #2c80b4; }
  </style>
</head>
<body>

  <!-- üîπ Danh s√°ch ƒë∆°n h√†ng -->
  <div id="order-list" class="container">
    <h1>Danh s√°ch ƒë∆°n h√†ng</h1>

    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="T√¨m ki·∫øm ƒë∆°n h√†ng...">
      <button class="btn" onclick="timKiem()">T√¨m</button>
    </div>

    <table>
      <thead>
        <tr>
          <th>STT</th>
          <th>M√£ ƒë∆°n</th>
          <th>Kh√°ch h√†ng</th>
          <th>SƒêT</th>
          <th>Ng√†y ƒë·∫∑t</th>
          <th>ƒê·ªãa ch·ªâ</th>
          <th>S·ªë l∆∞·ª£ng</th>
          <th>T√¨nh tr·∫°ng</th>
          <th>Chi ti·∫øt</th>
        </tr>
      </thead>
      <tbody id="order-body"></tbody>
    </table>

    <p id="no-order-text" class="no-order">Ch∆∞a c√≥ ƒë∆°n h√†ng n√†o.</p>
  </div>

  <!-- üîπ Chi ti·∫øt ƒë∆°n h√†ng -->
  <div id="order-detail" class="container">
    <button class="back-btn" onclick="quayLai()">‚Üê Quay l·∫°i</button>
    <h1>Chi Ti·∫øt ƒê∆°n H√†ng</h1>

    <p id="no-order" class="no-order">Ch∆∞a c√≥ th√¥ng tin ƒë∆°n h√†ng.</p>

    <div id="detail-content" style="display:none;">
      <div class="info" id="customer-info">
        <h3>Th√¥ng tin kh√°ch h√†ng</h3>
        <p><strong>T√™n kh√°ch h√†ng:</strong> <span id="customer-name">‚Äî</span></p>
        <p><strong>ƒê·ªãa ch·ªâ:</strong> <span id="customer-address">‚Äî</span></p>
        <p><strong>SƒêT:</strong> <span id="customer-phone">‚Äî</span></p>
      </div>

      <table id="product-table">
        <thead>
          <tr>
            <th>H√¨nh ·∫£nh</th>
            <th>T√™n s√°ch</th>
            <th>S·ªë l∆∞·ª£ng</th>
            <th>ƒê∆°n gi√°</th>
            <th>Th√†nh ti·ªÅn</th>
          </tr>
        </thead>
        <tbody id="product-body"></tbody>
      </table>

      <div class="summary">
        <h3>T·ªïng k·∫øt</h3>
        <p class="total">T·ªïng ti·ªÅn: <span id="total-price">0ƒë</span></p>
      </div>
    </div>
  </div>

  <script>
    // B·∫°n c√≥ th·ªÉ thay ph·∫ßn n√†y b·∫±ng d·ªØ li·ªáu th·∫≠t t·ª´ localStorage, API, ho·∫∑c backend
    let orders = []; // ‚Üê ƒë·ªÉ tr·ªëng, ho·∫∑c load t·ª´ localStorage khi c√≥

    const orderBody = document.getElementById("order-body");
    const noOrderText = document.getElementById("no-order-text");
    const orderList = document.getElementById("order-list");
    const orderDetail = document.getElementById("order-detail");

    const noOrder = document.getElementById("no-order");
    const detailContent = document.getElementById("detail-content");

    // Hi·ªÉn th·ªã danh s√°ch ƒë∆°n h√†ng
    function hienThiDanhSach(ds) {
      orderBody.innerHTML = "";
      if (!ds || ds.length === 0) {
        noOrderText.style.display = "block";
      } else {
        noOrderText.style.display = "none";
        ds.forEach((order, index) => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${index + 1}</td>
            <td>${order.code}</td>
            <td>${order.customer}</td>
            <td>${order.phone}</td>
            <td>${order.date}</td>
            <td>${order.address}</td>
            <td>${order.quantity}</td>
            <td>${order.status}</td>
            <td><button class="btn" onclick="xemChiTiet('${order.code}')">Xem</button></td>
          `;
          orderBody.appendChild(row);
        });
      }
    }

    hienThiDanhSach(orders);

    // H√†m xem chi ti·∫øt
    function xemChiTiet(maDon) {
      const order = orders.find(o => o.code === maDon);
      if (!order) return;

      orderList.style.display = "none";
      orderDetail.style.display = "block";

      noOrder.style.display = "none";
      detailContent.style.display = "block";

      document.getElementById("customer-name").textContent = order.customer;
      document.getElementById("customer-address").textContent = order.address;
      document.getElementById("customer-phone").textContent = order.phone;

      const productBody = document.getElementById("product-body");
      productBody.innerHTML = "";

      let tong = 0;
      (order.products || []).forEach(sp => {
        const thanhTien = sp.qty * sp.price;
        tong += thanhTien;

        const row = document.createElement("tr");
        row.innerHTML = `
          <td><img src="${sp.img}" alt="${sp.name}"></td>
          <td>${sp.name}</td>
          <td>${sp.qty}</td>
          <td>${sp.price.toLocaleString()}ƒë</td>
          <td>${thanhTien.toLocaleString()}ƒë</td>
        `;
        productBody.appendChild(row);
      });

      document.getElementById("total-price").textContent = tong.toLocaleString() + "ƒë";
    }

    // Quay l·∫°i danh s√°ch
    function quayLai() {
      orderDetail.style.display = "none";
      orderList.style.display = "block";
    }

    // T√¨m ki·∫øm ƒë∆°n h√†ng
    function timKiem() {
      const keyword = document.getElementById("searchInput").value.trim().toLowerCase();
      const ketQua = orders.filter(o => o.code.toLowerCase().includes(keyword));
      hienThiDanhSach(ketQua);
    }
  </script>
</body>
</html>
